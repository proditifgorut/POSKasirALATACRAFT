@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
  .font-playfair { font-family: 'Playfair Display', serif; }
  .font-mono { font-family: 'Roboto Mono', monospace; }
}

@layer components {
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200;
  }
  
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center;
  }
  
  .btn-secondary {
    @apply bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none;
  }

  .payment-method-btn {
    @apply p-4 border-2 border-gray-200 rounded-lg text-center cursor-pointer hover:border-primary-300 transition-colors;
  }

  .payment-method-btn.active {
    @apply border-primary-500 bg-primary-50 text-primary-700;
  }

  .receipt-content {
    @apply font-mono;
  }
}

.modal {
  backdrop-filter: blur(4px);
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Stock status indicators */
.stock-low {
  @apply border-l-4 border-orange-400;
}

.stock-out {
  @apply border-l-4 border-red-400 opacity-60;
}

.stock-normal {
  @apply border-l-4 border-green-400;
}

/* Animation for adding to cart */
@keyframes pulse-green {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(34, 197, 94, 0);
  }
}

.cart-add-animation {
  animation: pulse-green 0.6s ease-out;
}

/* --- KWITANSI TEMPLATES --- */
[class*="kwitansi-template-"] {
    display: flex;
    width: 27.7cm;
    height: 10cm;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    position: relative;
    font-family: 'Times New Roman', Times, serif;
    color: #333;
    background: white;
}
.kwitansi-stub { flex-shrink: 0; }
.kwitansi-main { flex-grow: 1; display: flex; flex-direction: column; }
.kwitansi-main-content { display: flex; flex-direction: column; height: 100%; }
.kwitansi-header { text-align: center; }
.kwitansi-title { font-weight: bold; }
.kwitansi-subtitle { display: none; }
.field-row { display: flex; align-items: baseline; }
.kwitansi-label { flex-shrink: 0; font-weight: bold; }
.input-line { flex-grow: 1; border-bottom: 1.5px dotted #374151; min-height: 24px; font-style: italic; }
.shaded-bg { background: #f3f4f6; border-radius: 2px; padding: 0 8px; font-weight: bold; }
.kwitansi-footer { margin-top: auto; display: flex; justify-content: space-between; align-items: flex-end; }
.total-box { display: flex; align-items: center; border-radius: 4px; }
.rp-label { font-weight: bold; }
.total-amount { font-weight: bold; }
.signature-area { text-align: center; }
.signature-space { height: 4rem; }
.signature-name { font-weight: bold; }

/* Template 1: Classic Blue */
.kwitansi-template-1 { border: 1px solid #7dd3fc; background-color: #f0f9ff; color: #0c4a6e; }
.kwitansi-template-1::before { content: ''; position: absolute; inset: 6px; border: 1px solid #38bdf8; background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23bae6fd' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"); }
.kwitansi-template-1 .kwitansi-stub { flex-basis: 7cm; padding: 0.5cm; border-right: 2px dashed #38bdf8; }
.kwitansi-template-1 .kwitansi-stub-content { height: 100%; border: 1px solid #7dd3fc; padding: 0.5cm; display: flex; flex-direction: column; text-align: center; }
.kwitansi-template-1 .stub-logo { flex-grow: 1; margin: 1cm 0; font-size: 5rem; line-height: 1; opacity: 0.1; }
.kwitansi-template-1 .kwitansi-main { padding: 0.5cm 1cm; }
.kwitansi-template-1 .kwitansi-main-content { position: relative; z-index: 1; }
.kwitansi-template-1 .kwitansi-title { font-size: 2rem; letter-spacing: 0.2em; border-bottom: 2px solid #0c4a6e; display: inline-block; padding: 0 1rem 0.25rem; margin-bottom: 1rem; }
.kwitansi-template-1 .field-row { margin-bottom: 1.2rem; font-size: 1.1rem; }
.kwitansi-template-1 .kwitansi-label { flex-basis: 150px; }
.kwitansi-template-1 .input-line { color: #1f2937; }
.kwitansi-template-1 .shaded-bg { background: #e0f2fe; }
.kwitansi-template-1 .total-box { border: 2px solid #0c4a6e; padding: 4px 12px; }
.kwitansi-template-1 .rp-label { font-size: 1.2rem; margin-right: 8px; }
.kwitansi-template-1 .total-amount { font-size: 1.5rem; }

/* Template 2: Modern Minimalist */
.kwitansi-template-2 { font-family: 'Inter', sans-serif; border: 1px solid #e5e7eb; }
.kwitansi-template-2 .kwitansi-stub { flex-basis: 6cm; padding: 1cm; border-right: 1px solid #e5e7eb; display: flex; flex-direction: column; justify-content: space-between; }
.kwitansi-template-2 .stub-logo { font-size: 2rem; font-weight: 700; color: #111827; }
.kwitansi-template-2 .stub-total-amount { font-size: 1.2rem; font-weight: 600; }
.kwitansi-template-2 .kwitansi-main { padding: 1.5cm; }
.kwitansi-template-2 .kwitansi-title { font-size: 1.5rem; letter-spacing: 0.1em; text-align: left; margin-bottom: 2rem; }
.kwitansi-template-2 .field-row { margin-bottom: 1.5rem; font-size: 1rem; }
.kwitansi-template-2 .kwitansi-label { flex-basis: 140px; color: #6b7280; font-weight: 500; }
.kwitansi-template-2 .input-line { border-bottom-style: solid; font-style: normal; }
.kwitansi-template-2 .shaded-bg { background: transparent; font-style: italic; padding: 0; }
.kwitansi-template-2 .total-box { padding: 8px 16px; background: #111827; color: white; }
.kwitansi-template-2 .rp-label { font-size: 1rem; }
.kwitansi-template-2 .total-amount { font-size: 1.5rem; }
.kwitansi-template-2 .signature-name { border-top: 1px solid #9ca3af; padding-top: 8px; }

/* Template 3: Corporate Green */
.kwitansi-template-3 { font-family: 'Inter', sans-serif; border-top: 8px solid #166534; }
.kwitansi-template-3 .kwitansi-stub { display: none; }
.kwitansi-template-3 .kwitansi-main { padding: 1.5cm 2cm; }
.kwitansi-template-3 .kwitansi-header { display: flex; justify-content: space-between; align-items: baseline; border-bottom: 2px solid #166534; padding-bottom: 1rem; margin-bottom: 2rem; }
.kwitansi-template-3 .kwitansi-title { font-size: 2.5rem; color: #166534; }
.kwitansi-template-3 .kwitansi-subtitle { display: block; text-align: right; }
.kwitansi-template-3 .field-row { margin-bottom: 1.5rem; }
.kwitansi-template-3 .kwitansi-label { flex-basis: 160px; }
.kwitansi-template-3 .shaded-bg { background: #dcf2e3; }
.kwitansi-template-3 .kwitansi-footer { flex-direction: column; align-items: flex-end; }
.kwitansi-template-3 .total-box { padding: 1rem; width: 50%; text-align: right; background: #166534; color: white; margin-bottom: 2rem; }
.kwitansi-template-3 .rp-label { display: none; }
.kwitansi-template-3 .total-amount { font-size: 2rem; }
.kwitansi-template-3 .signature-area { width: 50%; }

/* ... (Styles for templates 4-10 for Kwitansi) ... */
.kwitansi-template-4 { font-family: 'Playfair Display', serif; background: #fefdf8; border: 1px solid #e6caa3; }
.kwitansi-template-5 { font-family: 'Inter', sans-serif; font-weight: 700; }
.kwitansi-template-6 { background: #f0f9f4; color: #14532d; border-left: 8px solid #16a34a; }
.kwitansi-template-7 { background: #1f2937; color: #d1d5db; font-family: 'Roboto Mono', monospace; }
.kwitansi-template-8 { border: 2px solid #991b1b; background: #fef2f2; color: #991b1b; }
.kwitansi-template-9 { font-family: 'Inter', sans-serif; border-radius: 12px; border: 1px solid #a5b4fc; background: #eef2ff; }
.kwitansi-template-10 { background-image: url('https://www.transparenttextures.com/patterns/old-paper.png'); background-color: #fdf8f0; color: #5c4033; font-family: 'Times New Roman', Times, serif; }

/* --- NOTA TEMPLATES --- */
[class*="nota-template-"] { width: 21cm; min-height: 29.7cm; padding: 1.5cm; background: white; font-family: 'Inter', sans-serif; }
.nota-header { display: flex; justify-content: space-between; align-items: flex-start; }
.nota-title { font-weight: bold; }
.items-table { width: 100%; border-collapse: collapse; }
.items-table th, .items-table td { padding: 8px; }
.items-table thead { border-bottom: 2px solid black; }
.totals-section { display: flex; justify-content: flex-end; margin-top: 1.5rem; }
.totals-wrapper { width: 40%; }
.total-row { display: flex; justify-content: space-between; padding: 4px 0; }
.grand-total { font-size: 1.25rem; font-weight: bold; border-top: 2px solid black; margin-top: 0.5rem; padding-top: 0.5rem; }
.nota-footer { display: flex; justify-content: space-between; margin-top: 4rem; }
.signature-block { text-align: center; width: 40%; }
.signature-space { height: 5rem; }
.signature-name { border-top: 1px solid #9ca3af; padding-top: 8px; }
.thank-you-note { text-align: center; margin-top: 2rem; font-size: 0.875rem; color: #6b7280; }

/* Template 1: Classic Professional */
.nota-template-1 { font-family: 'Playfair Display', serif; }
.nota-template-1 .nota-header { border-bottom: 2px solid black; padding-bottom: 1rem; }
.nota-template-1 .company-name { font-size: 2rem; font-weight: bold; color: #166534; }
.nota-template-1 .nota-title { font-size: 1.5rem; letter-spacing: 0.1em; }
.nota-template-1 .customer-info-section { margin: 2rem 0; }
.nota-template-1 .items-table thead { border-top: 2px solid #9ca3af; }
.nota-template-1 .items-table th { text-align: left; }
.nota-template-1 .col-no, .nota-template-1 .col-qty { text-align: center; }
.nota-template-1 .col-price, .nota-template-1 .col-total { text-align: right; }
.nota-template-1 .items-table tbody tr:nth-child(even) { background: #f9fafb; }

/* Template 2: Modern Clean */
.nota-template-2 { font-family: 'Inter', sans-serif; }
.nota-template-2 .nota-header { margin-bottom: 2rem; }
.nota-template-2 .company-name { font-size: 1.25rem; font-weight: bold; }
.nota-template-2 .nota-title { font-size: 2rem; text-align: right; }
.nota-template-2 .items-table thead { background-color: #f3f4f6; border: none; }
.nota-template-2 .items-table th { padding: 12px; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.05em; }
.nota-template-2 .items-table td { padding: 12px; border-bottom: 1px solid #e5e7eb; }
.nota-template-2 .grand-total { background: #f3f4f6; padding: 1rem; }

/* Template 3: Gridless Minimal */
.nota-template-3 { font-family: 'Inter', sans-serif; }
.nota-template-3 .items-table th, .nota-template-3 .items-table td { border: none; padding: 12px 4px; }
.nota-template-3 .items-table thead { border-bottom: 1px solid #333; }
.nota-template-3 .items-table tbody tr { border-bottom: 1px solid #e5e7eb; }
.nota-template-3 .totals-wrapper { width: 30%; }
.nota-template-3 .grand-total { border: none; }
.nota-template-3 .nota-footer { justify-content: flex-start; }
.nota-template-3 .signature-block { width: auto; margin-right: 6rem; }

/* ... (Styles for templates 4-10 for Nota) ... */
.nota-template-4 { background: #111827; color: #e5e7eb; }
.nota-template-5 .nota-header { background: #166534; color: white; padding: 1.5rem; margin: -1.5cm -1.5cm 2rem -1.5cm; }
.nota-template-6 { display: flex; }
.nota-template-6 .nota-header { flex-direction: column; justify-content: flex-start; width: 7cm; background: #f3f4f6; padding: 1.5cm; margin: -1.5cm 2rem -1.5cm -1.5cm; }
.nota-template-6 .nota-main-content { flex-grow: 1; }
.nota-template-7 { font-size: 0.875rem; }
.nota-template-8 { font-family: 'Roboto Mono', monospace; background-image: url('https://www.transparenttextures.com/patterns/lined-paper.png'); background-color: #fefce8; }
.nota-template-9 .items-table thead { background: #fecaca; color: #991b1b; }
.nota-template-10 { text-align: center; }
.nota-template-10 .nota-header, .nota-template-10 .customer-info-section, .nota-template-10 .totals-section, .nota-template-10 .nota-footer { justify-content: center; text-align: center; }


/* --- RENTAL RECEIPT (1/3 A4 PORTRAIT) STYLES --- */

/* On-screen preview container with portrait aspect ratio */
#rental-preview-container {
    width: 100%;
    max-width: 330px; /* ~99mm for a better on-screen view */
    aspect-ratio: 99 / 210;
    margin: 0 auto;
    padding: 1rem;
    border: 1px solid #d1d5db;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    background: white;
}

/* The printable area fills its container */
#rental-printable-area {
    font-family: 'Times New Roman', Times, serif;
    font-size: 10pt;
    color: #000;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* Header for the receipt */
.receipt-header {
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #000;
}
/* Font sizes are now controlled by Tailwind classes in the HTML for consistency */

/* Body (main content) of the receipt */
.receipt-body {
    padding-top: 0.5rem;
}
.receipt-field {
    margin-bottom: 0.3rem;
    display: flex;
}
.receipt-label {
    font-weight: bold;
    flex: 0 0 100px; /* Adjusted width for labels */
}
.receipt-value {
    flex: 1;
}

/* Footer pushed to the bottom */
.receipt-footer {
    margin-top: auto;
    padding-top: 0.5rem;
    border-top: 1px dashed #000;
}

/* --- SHIPPING LABEL (100x150mm) STYLES --- */
#shipping-label-preview-container {
    width: 100%;
    max-width: 400px; /* 100mm is about 393px */
    aspect-ratio: 100 / 150;
    margin: 0 auto;
    padding: 1rem;
    border: 1px solid #d1d5db;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    background: white;
}

#shipping-label-printable-area {
    font-family: 'Inter', sans-serif;
    font-size: 8pt;
    color: #000;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    border: 2px solid black;
    padding: 8px;
}

.label-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid black;
    padding-bottom: 8px;
    margin-bottom: 8px;
}
.label-header .courier-logo {
    font-size: 1.5rem;
    font-weight: bold;
}
.label-header .service-type {
    border: 2px solid black;
    padding: 4px 8px;
    font-weight: bold;
    font-size: 10pt;
}

.label-section {
    border-bottom: 1px solid black;
    padding: 8px 0;
}
.label-section:last-child {
    border-bottom: none;
}
.label-section-title {
    font-weight: bold;
    font-size: 7pt;
    margin-bottom: 4px;
    text-transform: uppercase;
}
.label-recipient-details {
    font-weight: bold;
    font-size: 11pt;
}
.label-recipient-address {
    font-size: 10pt;
    line-height: 1.4;
}

.label-barcode-section {
    text-align: center;
    padding: 8px 0;
}
.label-barcode {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='50'%3E%3Cdefs%3E%3Cpattern id='barcode' patternUnits='userSpaceOnUse' width='10' height='50'%3E%3Crect x='0' y='0' width='10' height='50' fill='white'/%3E%3Crect x='0' y='0' width='1' height='50' fill='black'/%3E%3Crect x='2' y='0' width='2' height='50' fill='black'/%3E%3Crect x='5' y='0' width='1' height='50' fill='black'/%3E%3Crect x='7' y='0' width='1' height='50' fill='black'/%3E%3Crect x='9' y='0' width='1' height='50' fill='black'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='200' height='50' fill='url(%23barcode)'/%3E%3C/svg%3E");
    height: 50px;
    background-repeat: repeat-x;
    margin: 4px auto;
}
.label-awb {
    font-family: 'Roboto Mono', monospace;
    font-weight: bold;
    font-size: 14pt;
    letter-spacing: 2px;
}

.label-order-details {
    font-size: 7pt;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4px;
}

.label-items-list {
    font-size: 7pt;
    padding-left: 1rem;
    list-style-type: disc;
}

.label-footer {
    margin-top: auto;
    padding-top: 8px;
    border-top: 1px solid black;
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
}
.label-qr-code {
    width: 60px;
    height: 60px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 33 33' shape-rendering='crispEdges'%3E%3Cpath fill='%23000' d='M0 0h7v7H0zM9 0h7v7H9zM18 0h7v7h-7zM27 0h6v6h-6zM0 9h7v7H0zM0 18h7v7H0zM0 27h6v6H0zM9 9h7v7H9zM9 18h7v7H9zM9 27h6v6H9zM18 9h7v7h-7zM18 18h7v7h-7zM18 27h6v6h-6zM27 9h6v7h-6zM27 18h6v7h-6zM27 27h6v6h-6z'/%3E%3Cpath fill='%23fff' d='M2 2h3v3H2zM11 2h3v3h-3zM20 2h3v3h-3zM2 11h3v3H2zM2 20h3v3H2zM11 11h3v3h-3zM11 20h3v3h-3zM20 11h3v3h-3zM20 20h3v3h-3zM29 2h2v2h-2zM29 11h2v3h-2zM29 20h2v3h-2zM2 29h2v2H2zM11 29h2v2h-2zM20 29h2v2h-2zM29 29h2v2h-2z'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
}
.label-notes {
    flex-grow: 1;
    padding-left: 8px;
    font-size: 7pt;
}


/* --- UNIFIED PRINT STYLES --- */
@media print {
    body.printing-shipping-label {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    @page {
        size: A4;
        margin: 0;
    }

    @page shipping-label {
        size: 100mm 150mm;
        margin: 5mm;
    }

    body.printing-shipping-label .printable {
        page: shipping-label;
    }

    /* Hide everything by default when printing */
    body * {
        visibility: hidden;
    }
    
    /* Show only the designated printable area and its children */
    .printable, .printable * {
        visibility: visible;
    }
    
    /* Position the printable area to fill the page */
    .printable {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: auto;
        margin: 0;
        padding: 0;
        background: white;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* Hide elements marked as no-print */
    .no-print {
        display: none !important;
    }

    /* Remove screen-only styling from templates */
    [class*="kwitansi-template-"], [class*="nota-template-"], #shipping-label-printable-area {
        border: none !important;
        box-shadow: none !important;
    }
    #shipping-label-printable-area {
        border: 2px solid black !important;
    }

    /* --- Specific styles for the POS receipt --- */
    #receipt-content {
        max-width: 320px;
    }
}


/* Custom scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
